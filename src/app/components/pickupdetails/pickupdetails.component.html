<div class="card-container" fxFlex>
  <mat-card class="card-container">
    <ng-container *ngIf="returnAddress === undefined; else returnSelected">
      <mat-card-header>
        <div fxLayout="row" fxLayoutAlign="space-around center">
          <div fxLayout="column">
            <h3>Create Your pickup.</h3>
          </div>
        </div>
      </mat-card-header>
      <mat-card-content>
        <div fxLayout="row" fxLayoutAlign="center center">
          <div
            fxLayout="column"
            fxLayoutAlign="space-around center"
          >
            <p><i>Location to begin journey from has been selected.</i></p>
          </div>
        </div>

        <div fxLayout="row">
          <div
            fxLayout="column"
            fxLayoutAlign="space-around center"
            *ngIf="embarkAddress"
          >
            <p>Pickup Location</p>
            <p>{{ embarkAddress }}</p>
          </div>
        </div>
        <div fxLayout="row">
          <div fxLayout="column" fxLayoutAlign="space-around center">
            <button
              type="button"
              (click)="selectDestinationFunc()"
              mat-raised-button
              class="submit-btn"
            >
              <mat-icon>done</mat-icon> Select Destination
            </button>
          </div>
        </div>
      </mat-card-content>
    </ng-container>

    <ng-template #returnSelected>
      <mat-card-header>
        <div fxLayout="row" fxLayoutAlign="space-around center">
          <div fxLayout="column">
            <h3>Finish pickup by selecting destination.</h3>
          </div>
        </div>
      </mat-card-header>
      <mat-card-content>
        <form [formGroup]="pickupForm" (ngSubmit)="pickupFormSubmit()">
          <div fxLayout="row" fxLayoutAlign="space-around center">
            <div fxLayout="column" class="pickup-item-col">
              <label>Max Number of Passengers</label>
              <mat-form-field
                appearance="fill"
                floatLabel="auto"
                class="form-field-custom"
              >
                <mat-select
                  class="mat-select-edit"
                  formControlName="numPassengers"
                  required
                >
                  <mat-option value="2">2</mat-option>
                  <mat-option value="3">3</mat-option>
                  <mat-option value="4">4</mat-option>
                  <mat-option value="5">5</mat-option>
                  <mat-option value="6">6</mat-option>
                </mat-select>
                <mat-label
                  ><mat-icon>people</mat-icon>number of passengers</mat-label
                >
              </mat-form-field>
            </div>
          </div>
          <div fxLayout="row" fxLayoutAlign="space-around center">
            <div fxLayout="column" class="pickup-item-col">
              <label>Pickup Date</label>
              <mat-form-field appearance="fill">
                <mat-label>Choose a date</mat-label>
                <input
                  matInput
                  [matDatepicker]="picker"
                  formControlName="date"
                />
                <mat-datepicker-toggle
                  matSuffix
                  [for]="picker"
                ></mat-datepicker-toggle>
                <mat-datepicker #picker></mat-datepicker>
                <mat-error></mat-error>
              </mat-form-field>
            </div>
            <div fxLayout="column" class="pickup-item-col">
              <label>Pickup time</label>
              <mat-form-field appearance="fill">
                <mat-label>pickup time</mat-label>
                <input matInput type="time" formControlName="time" />
              </mat-form-field>
            </div>
          </div>
          <div fxLayout="row">
            <div
              fxLayout="column"
              fxLayoutAlign="space-around center"
            >
              <p>Pickup Address</p>
              <p>{{ embarkAddress }}</p>
              <p>Destination Address</p>
              <p>{{returnAddress}}</p>
            </div>
          </div>
          <div fxLayout="row">
            <div fxLayout="column" fxLayoutAlign="space-around center">
              <button type="button" (click)="closeDialog()" mat-raised-button class="submit-btn">
                <mat-icon>cancel</mat-icon> close
              </button>
            </div>
            <ng-container *ngIf="embarkAddress === undefined">
              <div fxLayout="column" fxLayoutAlign="space-around center">
                <button
                  type="button"
                  (click)="selectDestinationFunc()"
                  mat-raised-button
                  class="submit-btn"
                >
                  <mat-icon>done</mat-icon> Select Destination
                </button>
              </div>
            </ng-container>
          </div>
        </form>
      </mat-card-content>
    </ng-template>
  </mat-card>
  <mat-card-footer *ngIf="loading">
    <mat-progress-bar mode="indeterminate"></mat-progress-bar>
  </mat-card-footer>
</div>
